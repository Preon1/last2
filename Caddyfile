{
  # Note: Caddy requires an email value here. If you leave ACME_EMAIL empty,
  # the Caddyfile fails to parse. It's safe to omit this entirely; Caddy will
  # still obtain/renew Let's Encrypt certificates.
}

# Public site (set LRCOM_DOMAIN in your .env)
{$LRCOM_DOMAIN} {
  # Request RSA 4096-bit certs from Let's Encrypt (instead of ECDSA).
  tls {
    key_type rsa4096
  }

  # Proxy everything (HTTP + WebSocket) to the app running HTTPS inside the network.
  reverse_proxy https://lrcom:8443 {
    transport http {
      # The app uses an internal/self-signed cert by default.
      tls_insecure_skip_verify
    }
  }
}
